---
import { getI18nPaths, useTranslations } from '~/i18n/utils';
import { getFooterData } from '~/navigation';

import Layout from '~/layouts/PageLayout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import Prices from '~/components/widgets/Pricing.astro';
import FAQs from '~/components/widgets/FAQs.astro';
import Steps from '~/components/widgets/Steps.astro';
import Features3 from '~/components/widgets/Features3.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';

// 1️⃣ Static Paths
export async function getStaticPaths() {
  return getI18nPaths();
}

// 2️⃣ Sprache & Übersetzungen
const { lang } = Astro.params;
const t = useTranslations(lang); // intern fallback auf DEFAULT_LANG

// 3️⃣ FAQ Items mit exakter Reihenfolge

// 4️⃣ Metadata
const metadata = {
  title: `${t('home.hero.titleStart')} ${t('home.hero.titleAccent')} — AmendLogic`,
  ignoreTitleTemplate: true,
};

// 5️⃣ Footer Data
const footerData = getFooterData(lang, ['payments']);
---

<Layout metadata={metadata} footerData={footerData}>
  <!-- HeroText Widget ******************* -->

  <HeroText
    tagline={t('pricing.hero.tagline')}
    title={t('pricing.hero.title')}
    subtitle={t('pricing.hero.subtitle')}
  />

  <!-- Pricing Widget ******************* -->

  <Prices
    id="prices"
    title={t('pricing.title')}
    subtitle={t('pricing.subtitle')}
    prices={t('pricing.prices')}
  />

  <!-- Features3 Widget ************** -->

  <Features3
    title={t('pricing.trust.title')}
    subtitle={t('pricing.trust.subtitle')}
    columns={2}
    items={t('pricing.trust.items')}
    classes={{ container: 'max-w-5xl' }}
  />

  <!-- Steps Widget ****************** -->

  <Steps
    tagline={t('pricing.steps.tagline')}
    title={t('pricing.steps.title')}
    isReversed={true}
    items={t('pricing.steps.items')}
    image={{
      src: 'https://images.unsplash.com/photo-1536816579748-4ecb3f03d72a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=987&q=80',
      alt: 'Steps image',
    }}
  />

  <!-- FAQs Widget ******************* -->

  <FAQs
    tagline={t('faq.faq.tagline')}
    title={t('pricing.faq.title')}
    subtitle={t('faq.billing.subtitle')}
    columns={1}
    items={t('faq.billing.items')}
  />

  <!-- CallToAction Widget *********** -->

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: t('pricing.cta.btnText'),
        href: '#prices',
        target: '_self',
        icon: 'tabler:chevron-up',
      },
    ]}
  >
    <Fragment slot="title">
      {t('pricing.cta.title')}
    </Fragment>
    <Fragment slot="subtitle">
      {t('pricing.cta.subtitle')}
    </Fragment>
    <Fragment slot="bg">
      <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
    </Fragment>
  </CallToAction>

</Layout>
