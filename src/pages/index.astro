---
// src/pages/index.astro
// Diese Datei funktioniert auf JEDEM Hosting (auch GitHub Pages).
export const prerender = true; 
---
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    
    <meta http-equiv="refresh" content="0;url=/de/">

<script is:inline>
  try {
    var target = "de"; // Standard

    // --- 1) NEU: ZUERST Cookie pr√ºfen ---
    var m = document.cookie.match(/preferred_language=(en|de)/);
    if (m) {
      target = m[1];
    } 
    // --- 2) Dann erst LocalStorage ---
    else {
      var saved = localStorage.getItem("lang");

      var browser = navigator.language || navigator.userLanguage;

      if (saved && (saved === "de" || saved === "en")) {
        target = saved;
      } 
      else if (browser && browser.startsWith("en")) {
        target = "en";
      }
    }

    window.location.replace("/" + target + "/");
  } catch (e) {
    window.location.replace("/de/");
  }
</script>
</head>
<body>
    </body>
</html>

