---
import { Chart } from 'chart.js/auto'; // This imports types if needed, but we'll load the full lib via CDN.

const { chartId = 'myChart', type = 'bar', data, options = {} } = Astro.props;

// 'data' prop example: { labels: ['Jan', 'Feb'], datasets: [{ label: 'Sales', data: [12, 19] }] }
// 'options' prop: Chart.js options object, e.g., { scales: { y: { beginAtZero: true } } }
---

<div class="w-full h-64">
  <canvas id={chartId}></canvas>
</div>

<script>
  // Load Chart.js via CDN (no install needed)
  const script = document.createElement('script');
  script.src = 'https://cdn.jsdelivr.net/npm/chart.js';
  script.onload = () => {
    const ctx = document.getElementById('{chartId}').getContext('2d');
    new Chart(ctx, {
      type: '{type}',
      data: {JSON.stringify(data)},
      options: {JSON.stringify(options)},
    });
  };
  document.head.appendChild(script);
</script>