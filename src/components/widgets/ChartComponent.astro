---
const { id = "chart", type = "line", labels = [], datasets = [], options = {} } = Astro.props;
---

<div style="height: 300px;">
  <canvas id={id}></canvas>
</div>

<!-- Nur client-side rendern -->
<script type="module" client:load>
  import { Chart } from "https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.esm.min.js";

  const ctx = document.getElementById("{id}");
  if (ctx) {
    new Chart(ctx, {
      type: "{type}",
      data: {
        labels: JSON.parse('{JSON.stringify(labels)}'),
        datasets: JSON.parse('{JSON.stringify(datasets)}'),
      },
      options: JSON.parse('{JSON.stringify(options)}'),
    });
  }
</script>